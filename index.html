<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Rolling Dice </title>
</head>
<body onload="initialize();">
  <h1 style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; color: rgb(223, 209, 191); font-size: 50px;" >Rolling Dice</h1>
  <form id="inputform">
    <label for="diceRolled" style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; color: rgb(223, 209, 191); font-size: 25px;">How many dice would you like to roll. Up to 3</label>
    <input name="number" style="padding-right: 100px ;">
    
    <label for="diceRolling" style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; color: rgb(223, 209, 191); font-size: 25px;">How many times would you like to roll?</label>
    <input name="rollTimes" style="padding-right: 100px ;">
  </form>
  <button onclick="math();" style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; color: rgb(0, 0, 0); font-size: 25px; background-color: rgb(255, 255, 255);">Roll Dice</button>
  <table id="dicetable">
    <tr id="dicetableheader">
      <th>Mean of numbers</th>
      <th>Mode of numbers</th>
      <th>Median of numbers</th>
    </tr>
  </table>
  <table id="frequencytable">
	<th>Numbers rolled</th>
      <th>Frequency of numbers</th>
  </table>

<script>
function initialize() {
  inputContainer = document.getElementById("inputform");
  diceTable = document.getElementById("dicetable");
  frequencyTable = document.getElementById("frequencytable");
}

function math() {
  reset();
  setValues();

  // Adds headers to dice table
  if (numDice == 2 || numDice == 3) {
    addHeader(diceTable, "Doubles", dicetableheader);
  }
  if (numDice == 3) {
    addHeader(diceTable, "Triples", dicetableheader);
  }

  // Roll dice and track results
  for (let i = 0; i < numRolls; i++) {
    let roll = 0;
    if (numDice == 1) {
      let dice1 = parseInt(Math.random() * 6 + 1);
      roll = dice1;
    } else if (numDice == 2) {
      let dice1 = parseInt(Math.random() * 6 + 1);
      let dice2 = parseInt(Math.random() * 6 + 1);
      roll = dice1 + dice2;
      if (dice1 == dice2) {
        numDoubles++;
      }
    } else {
      let dice1 = parseInt(Math.random() * 6 + 1);
      let dice2 = parseInt(Math.random() * 6 + 1);
      let dice3 = parseInt(Math.random() * 6 + 1);
      roll = dice1 + dice2 + dice3;
      if (dice1 == dice2 == dice3) {
        numTriples++;
      } else if (dice1 == dice2 || dice1 == dice3 || dice2 == dice3) {
        numDoubles++;
      }
    }
    frequency[roll - 1]++;
    total += roll;
    rolls.push(roll);
  }

    for(let i = 0; i < frequency.length; i++) {
    let firstRow = frequencyTable.insertRow();
    let cell0 = firstRow.insertCell(0);
    let cell1 = firstRow.insertCell(1);
    cell0.innerHTML = i + 1;
    cell1.innerHTML = frequency.at(i);
    }
    mean = total / numRolls;
    mean = Math.round(100*mean)/100;
    let firstRow = diceTable.insertRow();
    cell0 = firstRow.insertCell(0);
    cell0.innerHTML = mean;
    for(let i = 0; i < frequency.length; i++) {
    if(i == 0) {
    maxFrequency = frequency.at(i);
    mode = i + 1;
    } else {
    if(frequency.at(i) > maxFrequency) {
    mode = i + 1;
    maxFrequency = frequency.at(i);
    }
    else if (frequency.at(i) == maxFrequency) {
    mode = mode + ", " + (i + 1);
    }
    }
    }
    let cell1 = firstRow.insertCell(1);
    cell1.innerHTML = mode;
    rolls.sort((a,b)=>a-b);
    if((numRolls % 2) == 0) {
      median = (rolls[Math.floor(rolls.length / 2)] + rolls[rolls.length / 2 - 1]) / 2;
      let cell2 = firstRow.insertCell(2);
      cell2.innerHTML = median;
    } else {
      median = rolls[Math.floor(rolls.length / 2)];
      let cell2 = firstRow.insertCell(2);
      cell2.innerHTML = median;
    }
    if(numDice == 2) {
      cell3 = firstRow.insertCell(3);
      cell3.innerHTML = numDoubles;
    } else if(numDice == 3) {
      cell3 = firstRow.insertCell(3);
      if(!cell3.innerHTML == numDoubles)
      {
        numDoubles = "No Doubles";
      }
      cell4 = firstRow.insertCell(4);
      cell4.innerHTML = numTriples;
      if(!cell4.innerHTML == numTriples)
      {
        numDoubles = "No Triples";
      }
    }

    function setValues() {
		mean = 0;
        median = 0;
        mode = 0;
        currentFrequency = 0;
        maxFrequency = 0;
        total = 0;
        numOfDoubles = 0;
        numOfTriples = 0;
        numDice = inputContainer.number.value;
        numRolls = inputContainer.rollTimes.value;
        inputContainer.number.value = "";
        inputContainer.rollTimes.value = "";
        highestTotalRoll = numDice * 6;
        lowestTotalRoll = numDice;
        rolls = [];
        (frequency = []).length = (numDice == 1) ? 6 : (numDice == 2) ? 12 : 18;
        frequency.fill(0);
      }
      
      function addHeader(tableName, newHeader, trId) {
        let th = document.createElement("th");
        trId.appendChild(th);
        th.innerHTML = newHeader;
        th.id = newHeader;
      }
      
      function reset() {
        let doubles = document.getElementById("Doubles");
        let triples = document.getElementById("Triples");
        deleteHeader(doubles);
        deleteHeader(triples);
        deleteRows(diceTable);
        deleteRows(frequencyTable);
      }
      
      function deleteHeader(header) {
        (header != null) ? header.remove() : null;
      }
      
      function deleteRows(tb) {
        let numRows = tb.rows.length - 1;
        for(let i = numRows; i > 0; i--) {
          tb.deleteRow(i);	
        }
      }
	}
</script>
<style>
body {
	background-color: rgb(47, 185, 104);
	color: black;
}
table {
	width: 50%;
	text-align: center;
}



</style>
</body>
</html>  
